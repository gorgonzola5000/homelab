stages:          # List of stages for jobs, and their order of execution
  - deploy

ansible 1/2:       # This job runs in the build stage, which runs first.
  stage: deploy
  variables:
    ANSIBLE_HOST_KEY_CHECKING: False
  before_script:
    - 'which ssh-agent || ( apt-get update -y && apt-get install openssh-client git -y )'
    - eval $(ssh-agent -s)
    - echo $ANSIBLE_PRIVATE_KEY | base64 -d | ssh-add -
  script:
    - cd ansible
    - ansible-playbook proxmox.yml

ansible 2/2:       # This job runs in the build stage, which runs first.
  stage: deploy
  variables:
    ANSIBLE_HOST_KEY_CHECKING: False
  before_script:
    - 'which ssh-agent || ( apt-get update -y && apt-get install openssh-client git -y )'
    - eval $(ssh-agent -s)
    - echo $ANSIBLE_PRIVATE_KEY | base64 -d | ssh-add -
  script:
    - cd ansible
    - ansible-playbook alma-linux-9.yml
